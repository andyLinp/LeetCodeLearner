package com.learner.leetcodelearner.lib.medium;

import java.util.ArrayDeque;
import java.util.Deque;

/**
 * @Description
 * @Author andy lin
 * @Date: 2022/10/27 16:41
 **/
public class No_934 {
//ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º n x n çš„äºŒå…ƒçŸ©é˜µ grid ï¼Œå…¶ä¸­ 1 è¡¨ç¤ºé™†åœ°ï¼Œ0 è¡¨ç¤ºæ°´åŸŸã€‚
//
// å²› æ˜¯ç”±å››é¢ç›¸è¿çš„ 1 å½¢æˆçš„ä¸€ä¸ªæœ€å¤§ç»„ï¼Œå³ä¸ä¼šä¸éç»„å†…çš„ä»»ä½•å…¶ä»– 1 ç›¸è¿ã€‚grid ä¸­ æ°å¥½å­˜åœ¨ä¸¤åº§å²› ã€‚
//
//
//
// ä½ å¯ä»¥å°†ä»»æ„æ•°é‡çš„ 0 å˜ä¸º 1 ï¼Œä»¥ä½¿ä¸¤åº§å²›è¿æ¥èµ·æ¥ï¼Œå˜æˆ ä¸€åº§å²› ã€‚
//
//
//
// è¿”å›å¿…é¡»ç¿»è½¬çš„ 0 çš„æœ€å°æ•°ç›®ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šgrid = [[0,1],[1,0]]
//è¾“å‡ºï¼š1
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šgrid = [[0,1,0],[0,0,0],[0,0,1]]
//è¾“å‡ºï¼š2
//
//
// ç¤ºä¾‹ 3ï¼š
//
//
//è¾“å…¥ï¼šgrid = [[1,1,1,1,1],[1,0,0,0,1],[1,0,1,0,1],[1,0,0,0,1],[1,1,1,1,1]]
//è¾“å‡ºï¼š1
//
//
//
//
// æç¤ºï¼š
//
//
// n == grid.length == grid[i].length
// 2 <= n <= 100
// grid[i][j] ä¸º 0 æˆ– 1
// grid ä¸­æ°æœ‰ä¸¤ä¸ªå²›
//
//
// Related Topics æ·±åº¦ä¼˜å…ˆæœç´¢ å¹¿åº¦ä¼˜å…ˆæœç´¢ æ•°ç»„ çŸ©é˜µ ğŸ‘ 340 ğŸ‘ 0


    private int[] dirs = {-1, 0, 1, 0, -1};
    private Deque<int[]> q = new ArrayDeque<>();
    private int[][] grid;
    private int n;

    public int shortestBridge(int[][] grid) {
        this.grid = grid;
        n = grid.length;
        // é€šè¿‡dfsæœç´¢ç¬¬ä¸€ä¸ªå²›å±¿ æ‰¾åˆ°åé€€å‡º(é€šè¿‡x == 1 æ¥æ§åˆ¶é€€å‡ºå¯»æ‰¾)
        for (int i = 0, x = 1; i < n && x == 1; ++i) {
            for (int j = 0; j < n; ++j) {
                if (grid[i][j] == 1) {
                    dfs(i, j);
                    x = 0;
                    break;
                }
            }
        }
        // ans ä¸ºå²›å±¿1åˆ°å²›å±¿2 åœˆå±‚æ•°(å³å²›å±¿1åˆ°å²›å±¿2æœ€è¿‘è·ç¦»)
        int ans = 0;
        while (true) {
            for (int i = q.size(); i > 0; --i) {
                // ä»å²›å±¿æœ€å¼€å§‹çš„ç‚¹å‘å¤–å±•å¼€
                int[] p = q.pollFirst();
                for (int k = 0; k < 4; ++k) {
                    int x = p[0] + dirs[k], y = p[1] + dirs[k + 1];
                    if (x >= 0 && x < n && y >= 0 && y < n) {
                        // å‘å¤–æ‰©å±•çš„è¿‡ç¨‹ä¸­æ¥è§¦åˆ°äº†å²›å±¿2 æ­¤æ—¶ans(å³å‘å¤–æ‰©å±•çš„å±‚çº§)å°±æ˜¯æœ€çŸ­è·ç¦»
                        if (grid[x][y] == 1) {
                            return ans;
                        }
                        // å‘å¤–æ‰©å±•çš„è¿‡ç¨‹ä¸­æ¥è§¦åˆ°æµ· æ ‡è®°å¹¶æ”¶å…¥é˜Ÿåˆ—ä¸­
                        if (grid[x][y] == 0) {
                            grid[x][y] = 2;
                            q.offer(new int[]{x, y});
                        }
                    }
                }
            }
            ans++;
        }
    }

    private void dfs(int i, int j) {
        // æœç´¢æ—¶å±äºå²›å±¿1çš„ç‚¹åšè®°å· æ ‡è®°ä¸º2 å¹¶å°†è¯¥åœ°ç‚¹åŠ å…¥é˜Ÿåˆ—
        grid[i][j] = 2;
        q.offer(new int[]{i, j});
        for (int k = 0; k < 4; ++k) {
            int x = i + dirs[k], y = j + dirs[k + 1];
            if (x >= 0 && x < n && y >= 0 && y < n && grid[x][y] == 1) {
                dfs(x, y);
            }
        }
    }

}
